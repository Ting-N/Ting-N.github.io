---
title: 《深入理解计算机系统》第一章读书笔记
published: 2025-03-08
description: 第一章 计算机系统漫游
tags: [笔记,深入理解计算机系统]
category: 《深入理解计算机系统》读书笔记
draft: false
---

# 计算机系统漫游

## 本书的目的

>帮助你了解当你在系统上执行 hello 程序时，系统发生的声明以及为什么会这样。

## 编译系统

1. **预处理阶段** *预编译器* 将头文件插入到程序文本中。 `hello.i`

2. **编译阶段** *编译器* 翻译为汇编语言程序。 `hello.s`

3. **汇编阶段** *汇编器* 翻译为机器语言指令，打包成可重定位目标程序。 `hello.o`

4. **链接阶段** *链接器* 合并目标文件，得到可执行文件。 `hello`

## 操作系统管理硬件

**进程** 是操作系统对一个正在运行的程序的一种抽象。

**上下文** 操作系统保持追踪进程运行所需的所有状态信息，包括：

- PC（程序计数器）

- 寄存器文件的当前值

- 主存的内容

---

**上下文切换** 保存当前进程的上下文、恢复新进程的上下文，然后将控制权传递到新进程。

**内核** 管理进程的转换。

**虚拟内存空间**

- 程序代码和数据

- 堆

- 共享库 *存放像C标准库和数学库这样共享库的代码和数据的区域*

- 栈 *编译器用它来实现函数调用*

- 内核虚拟内存 *为内核保留，不允许程序读写*

## Amdahl 定律

若系统执行某应用程序需要的时间为 $T_{old}$ ,系统某部分所需执行时间与该时间的比例为 $\alpha$ ,而该部分性能提升比例为 $k$ ,则总的执行时间为  
$$
T_{new}=(1-\alpha)T_{old}+(\alpha T_{old})/k =T_{old}[(1-\alpha)+\alpha /k]
$$  
加速度比 $S=T_{old}/T_{new}$ 为  
$$
S=\frac 1{(1-\alpha)+\alpha /k}
$$  

>**Amdahl 定律的主要观点：**  
>要想显著加速整个系统，必须提升全系统中相当大的部分的速度。

---

### 练习题1.1

**A.**

已知
$$
\alpha =1500/2500=0.6 \\
k=\frac {1500/100}{1500/150}=1.5
$$
可以解得，
$$
S=1.25
$$

**B.**

已知
$$
S=1.67 \\
\alpha =0.6
$$
可以解得，
$$
k=3
$$
通过蒙大拿的时速为 $300 \space km/h$.

### 练习题1.2

已知
$$
S=2 \\
\alpha =0.8
$$
可以解得，
$$
k=2.67
$$

---

## Amdahl 定律的一个无穷形式

考虑 $k$ 趋向于 $\infty$ 时，系统的某一部分花费的时间可以忽略不计。此时
$$
S=\frac 1{1-\alpha}
$$

>*如果 $60\%$ 的系统能加速到瞬间完成，净加速比也只有2.5倍!*









